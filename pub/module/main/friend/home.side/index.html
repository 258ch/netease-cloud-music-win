<meta charset="utf-8"/> <textarea name="txt" id="m-rsde-module"> <div class="j-flag"></div> <div class="n-addgz f-dn j-flag"></div> <div class="m-ulist f-dn j-flag"> <h3>认识的人<a href="javascript:;" class="more j-flag s-fc4" data-da-event="e131">更多</a></h3> <div class="j-flag m-empty m-empty-1 f-dn"> <p class="s-fc3"><a href="#/m/friend/find/bind/" class="s-fc2">绑定微博</a>，寻找更多好友</p> </div> <ul class="j-flag f-cb"></ul> </div> </textarea> <textarea name="txt" id="m-rsde-login"> <div class="m-frdlogin"> <div class="pic"></div> <p class="note s-fc3">登录网易云音乐，可以享受无限收藏的乐趣，并且无限同步到手机</p> <button class="btn u-ibtn1 u-ibtnsz3 f-ff2" data-anon-action="friend_event">立即登录</button> </div> </textarea> <textarea name="jst" id="m-rsde-head"> <div class="m-uinfo"> <a href="#/m/personal/?uid=${profile.userId}" class="uface u-face u-face-me" data-da-event="f111"> <img src="${profile.avatarUrl}?param=50y50&quality=100" onerror="nm.l.f.empty(this)"> ${userType} </a> <div class="uwrap"> <div class="uwrapc"> <h5> <a href="#/m/personal/?uid=${profile.userId}" class="s-fc1" data-da-event="f111"> ${profile.nickname|escape2} </a> ${userGender} </h5> <p class="s-fc4">${profile.signature|escape2}</p> </div> </div> <ul class="f-cb"> <li><a href="#/m/personal/event/?uid=${profile.userId}" class="s-fc3" data-da-event="f112"><span class="num" id="usrevents">${profile.eventCount}</span>动态</a></li> <li><a href="#/m/personal/follow/?uid=${profile.userId}" class="s-fc3" data-da-event="f113"><span class="num" id="usrfollows">${profile.follows}</span>关注</a></li> <li><a href="#/m/personal/fans/?uid=${profile.userId}" class="s-fc3" data-da-event="f114"><span class="num">${profile.followeds}</span>粉丝</a></li> </ul> </div> </textarea> <textarea name="jst" id="m-rsde-item"> {list xlist as x} {if x.snsType!=6} <li class="z-show"> <a href="#/m/personal/?uid=${x.userId}" class="u-face u-face-2"><img src="${x.avatarUrl}?param=32y32&quality=100" onerror="nm.l.f.empty(this)"></a> <div class="ulwrapc"> <h5> <a href="#/m/personal/?uid=${x.userId}" class="s-fc1"> ${x.nickname} ${commonJST('com-user-type', x)} </a> </h5> <p class="s-fc4"> {if type=="know"} {if x.snsType==2}新浪微博好友：${x.snsNickname} {elseif x.snsType==1}手机联系人：${x.snsNickname} {/if} {else} ${x.description} {/if} </p> </div> <span data-value="${type}-${x.userId}" class="j-add u-follow u-follow-add f-cp" title="加关注" data-da-event="e132"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_follow_add"></use></svg></span> <span data-value="${type}-${x.userId}" class="udel j-del" title="不感兴趣"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_close"></use></svg></span> </li> {/if} {/list} </textarea> <textarea name="jst" id="m-rfinds-list"> <h3>添加关注<!--a href="#/m/friend/finds/star/" class="more s-fc3">更多</a--></h3> <ul class="f-cb"> <li><a href="#/m/friend/finds/star/" class="s-fc1" data-da-event="e121"><span class="uicn vip"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#timeline_v"></use></svg></span><span class="tit">明星</span><span class="num">${data.star}</span><i class="arr f-ff1">&gt;</i></a></li> <li><a href="#/m/friend/finds/daren/" class="s-fc1" data-da-event="e122"><span class="uicn daren"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#timeline_daren"></use></svg></span><span class="tit">音乐达人</span><span class="num">${data.daren}</span><i class="arr f-ff1">&gt;</i></a></li> <li><a href="#/m/friend/finds/dj/" class="s-fc1" data-da-event="e123"><span class="uicn dj"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#timeline_dj"></use></svg></span><span class="tit">DJ</span><span class="num">${data.dj}</span><i class="arr f-ff1">&gt;</i></a></li> <li><a href="#/m/friend/finds/player/" class="s-fc1" data-da-event="e124"><span class="uicn yyr"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#timeline_yyr"></use></svg></span><span class="tit">网易音乐人</span><span class="num">${data.player}</span><i class="arr f-ff1">&gt;</i></a></li> </ul> </textarea> <textarea name="js">(function(){var byz=NEJ.P,eu=window,cJO=NEJ.O,byA=byz("nej.e"),bm=byz("nej.u"),bi=byz("nej.v"),bU=byz("nej.ut"),bj=byz("nm.x"),bxI=byz("nm.i"),bR=byz("nm.l"),bp=byz("nm.d"),bY=byz("nm.m"),bC=byz("nm.m.r"),byx,byD;bC.bCy=NEJ.C();byx=bC.bCy.bS(bY.cW);byx.byG=function(){this.bCU="m-rsde";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bCx=bg[0];this.Ms=bg[1];this.cbR=bg[2];this.bTm=bg[3];this.Zg=bg[4];this.Mr=bg[5];bi.bM(this.bTm,"click",this.bpv.byB(this));bi.bM(this.bA,"click",this.bpy.byB(this));bi.bM(bp.kj,"listchange",this.ku.byB(this));bi.bM(bp.du,"findscount",this.bTn.byB(this));bi.bM(bp.du,"itemchange",this.bFz.byB(this));this.byJ={onstatcountload:this.Zh.byB(this),onitemload:this.Zh.byB(this),onlistload:this.yW.byB(this),onfollowupdate:this.Ah.byB(this),onerror:this.gF.byB(this),ondislike:this.bpA.byB(this)};this.LV={know:[],recommend:[]}};byx.dq=function(blZ){this.dC(blZ);this.sP={know:[],recommend:[]};this.Mr.innerHTML="";this.BB=[];this.byK=localCache.cF("host.profile.userId");this.bpE()};byx.bpE=function(){if(!!this.bH)this.bH.bQ();this.bH=bp.du.bG(this.byJ);if(bj.btm()){byA.bK(this.Ms,"f-dn");byA.bK(this.cbR,"f-dn");this.bCx.innerHTML=byA.gy("m-rsde-login")}else{if(byA.ey(this.Ms,"f-dn")){this.bCx.innerHTML='<div class="u-load"></div>'}byA.bJ(this.Ms,"f-dn");byA.bJ(this.cbR,"f-dn");this.bH.Iz(this.byK);this.bH.tw("user_bindings-"+this.byK,!1);this.bH.fE({key:"user_bindings-"+this.byK,offset:0,limit:10,data:{offset:0,limit:10,userId:this.byK},ext:{type:"bind"}})}};byx.bTn=function(bn){byA.eB(this.Ms,"m-rfinds-list",{data:bn})};byx.Zh=function(blZ){if(!blZ)return;if(bj.hi(blZ)){bj.jD(null,true,this.bCx)}if(blZ.key=="user-"+this.byK){var bh=this.bH.cl(this.byK)}else{if(!!blZ.userId){var bh=blZ}else{this.bH.hv({userId:this.byK,key:"user-"+this.byK})}}if(!bh)return;byA.eB(this.bCx,"m-rsde-head",{profile:bh,userType:ctl.commonJST.cFB("com-user-type-2",bh,"uicn"),userGender:ctl.commonJST.cFB("com-user-gender",bh,!0)},{escape2:bj.fg});this.bH.bTs()};byx.bBP=function(bq,cQ){var sL=false;if(bq=="all"){if(!!cQ)sL=true;cQ=null}var lS="";for(var i=0,bo,fr=this.LV["know"];bo=fr[i];i++){if(!i){lS+=bo}else{lS+=";"+bo}}for(var i=0,bo,fr=this.sP["know"];bo=fr[i];i++){if(lS)lS+=";"+bo;else lS+=bo}this.bH.eN("user_rec_friend-"+this.byK);this.bH.fE({key:"user_rec_friend-"+this.byK,data:{starNum:0,snsNum:bq=="all"?sL?7:8:1,random:sL,filterUserIds:lS},ext:{type:bq,node:cQ}})};byx.Mh=function(bq,cQ){var sL=false;if(bq=="all"){if(!!cQ)sL=true;cQ=null}var lS="";for(var i=0,bo,fr=this.LV["recommend"];bo=fr[i];i++){if(!i){lS+=bo}else{lS+=";"+bo}}for(var i=0,bo,fr=this.sP["recommend"];bo=fr[i];i++){if(lS)lS+=";"+bo;else lS+=bo}this.bH.eN("user_rec_follow-"+this.byK);this.bH.fE({key:"user_rec_follow-"+this.byK,data:{starNum:bq=="all"?sL?3:4:1,snsNum:0,random:sL,filterUserIds:lS},ext:{type:bq,node:cQ}})};byx.yW=function(blZ){if(!blZ.ext){return}if(blZ.ext.type=="all"){if(blZ.key=="user_rec_friend-"+this.byK){this.Zk(this.Mr,"know",this.bH.byI("user_rec_friend-"+this.byK),!blZ.data.random)}}else if(blZ.ext.type=="one"){if(blZ.key=="user_rec_friend-"+this.byK){this.Zl(blZ.ext.node,this.bH.byI("user_rec_friend-"+this.byK))}else if(blZ.key=="user_rec_follow-"+this.byK){this.Zl(blZ.ext.node,this.bH.byI("user_rec_follow-"+this.byK))}}else if(blZ.ext.type=="bind"){if(blZ.key=="user_bindings-"+this.byK){var gG=this.bH.byI("user_bindings-"+this.byK),Zm=false;for(var i=0,ii=gG.length;i<ii;i++){if(gG[i].type==2){Zm=true;break}}if(Zm){byA.bK(this.Zg,"f-dn");this.bBP("all")}else{byA.bJ(this.Zg,"f-dn")}}}};byx.gF=function(byy){if(bj.hi(byy)){if(byy.key=="user_rec_friend-"+this.byK||byy.key=="user_rec_follow-"+this.byK){this.ej(byy,true,this.Mr)}bj.ci({txt:"网络不给力哦，请检查你的网络设置~"});byy.stopped=true}};byx.Zk=function(cQ,bq,bE,kq){if(kq&&bE.length==0){byA.bK(cQ.parentNode,"f-dn")}else{byA.bJ(cQ.parentNode,"f-dn")}if(kq){if(bq=="know"){if(bE.length==8){bE.length=7}else{}}else{if(bE.length==4){bE.length=3}else{}}}this.sP[bq].length=0;for(var i=0,bl;bl=bE[i];i++){this.sP[bq].push(bl.userId)}byA.eB(cQ,"m-rsde-item",{type:bq,xlist:bE,commonJST:ctl.commonJST.cFB})};byx.bpy=function(byy){var cQ=bi.cR(byy);if(byA.ey(cQ,"j-add")){this.bpK(cQ)}else if(byA.ey(cQ,"j-del")){var bO=byA.bT(cQ,"value");var bE=bO.split("-");this.LV[bE[0]].push(bE[1]);if(bE[0]=="know"){nm.log.dE(nm.log.ACTION.NOT_INTEREST_FRIEND_CLICK)}else{nm.log.dE(nm.log.ACTION.NOT_INTEREST_DJ_CLICK)}this.bH.bpg(bE[1],cQ);bi.bQd(byy)}};byx.bpK=function(cQ){var bO=byA.bT(cQ,"value");var bE=bO.split("-");var wB=bE[1];this.BB.push({uid:wB,node:cQ});if(bE[0]=="know"){nm.log.dE(nm.log.ACTION.FOLLOW_FRIEND_CLICK)}else{nm.log.dE(nm.log.ACTION.FOLLOW_DJ_CLICK)}this.bH.wE(wB,true)};byx.Ah=function(bn){if(!!bn&&bn.userId){var bs=-1;for(var Bx=0,jF=this.BB.length;Bx<jF;Bx++){if(this.BB[Bx].uid==bn.userId){bs=Bx;break}}if(bs>-1){this.Zo(this.BB.splice(bs,1)[0].node);var cQ=byA.cg("usrfollows");if(!!cQ)cQ.innerText=Number(cQ.innerText)+1}}};byx.Zo=function(cQ){var bO=byA.bT(cQ,"value");var bE=bO.split("-");var bq=bE[0];if(bq=="know"){this.bBP("one",cQ)}else{this.Mh("one",cQ)}};byx.Zl=function(cQ,bE){var bO=byA.bT(cQ,"value");var bAQ=bO.split("-");var bq=bAQ[0];var wB=bAQ[1];for(var i=0,bo,fr=this.sP[bq];bo=fr[i];i++){if(bo==wB){if(!bE.length){this.sP[bq].splice(i,1)}else{this.sP[bq].splice(i,1,bE[0].userId)}break}}while(cQ){if(cQ.tagName.toLowerCase()=="li")break;cQ=cQ.parentNode}if(bE.length){var dT=byA.gk("m-rsde-item",{type:bq,xlist:bE});var bk=document.createElement("div");bk.innerHTML=dT;bk=bk.firstElementChild;byA.bK(bk,"z-show");cQ.parentNode.insertBefore(bk,cQ)}var bBn=cQ.parentNode;byA.lG(cQ,true)};byx.bpv=function(byy){this.Ky();nm.log.dE("click",null,null,{type:"recommendfriendmore"});location.hash="/m/friend/find/invite/?uid="+localCache.cF("host.profile.userId")};byx.Ky=function(){dispatcher.gM({to:"/?/frame/top/",from:"",data:"onclosenewfriend",mode:0})};byx.ku=function(blZ){if(blZ.key=="event-"+localCache.cF("host.profile.userId")){var bk=byA.cg("usrevents");if(bk){bk.innerText=Math.max(Number(bk.innerText||0)-1,0)}}};byx.bpA=function(byy){if(byy.code==200){if(byy.ext&&byy.ext.node){this.Zo(byy.ext.node)}}};byx.bFz=function(byy){if(byy&&byy.attr=="eventCount"&&byy.data&&byy.data.userId==localCache.cF("host.profile.userId")){var bk=byA.cg("usrevents");if(bk){bk.innerText=Math.max(0,byy.data.eventCount)}}};bj.cU("/?/friend/side/",bC.bCy)})()</textarea>